<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login - TipOff</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen flex items-center justify-center p-6 bg-gray-50">
  <div class="w-full max-w-6xl grid grid-cols-1 lg:grid-cols-2 gap-10 items-center bg-white shadow-xl rounded-2xl p-8">
    
    <!-- Left Column: Branding -->
    <div class="space-y-8 text-center lg:text-left">
      <div class="flex items-center justify-center lg:justify-start gap-3">
        <div class="bg-gradient-to-r from-purple-500 to-pink-500 text-white p-3 rounded-full text-2xl">üèÄ</div>
        <h1 class="text-4xl font-bold text-gray-800">TipOff</h1>
      </div>
      <p class="text-lg text-gray-600">
        Join the ultimate NBA community. Connect with fans, discuss games, and stay updated with the latest basketball news.
      </p>
    </div>

    <!-- Right Column: Login Card -->
    <div class="bg-white border border-gray-200 shadow-lg rounded-xl p-8">
      <div class="flex justify-center gap-3 mb-6">
        <button id="signInTab" class="px-4 py-2 rounded-lg text-sm font-medium bg-gradient-to-r from-purple-500 to-pink-500 text-white">Sign In</button>
        <button id="signUpTab" class="px-4 py-2 rounded-lg text-sm font-medium bg-gray-100 hover:bg-gray-200">Sign Up</button>
      </div>

      <h2 class="text-2xl font-bold text-center mb-6" id="formTitle">Welcome Back</h2>

      <form id="loginForm" class="space-y-4">
        <div id="signupFields" class="hidden">
          <div>
            <label class="block text-sm font-medium text-gray-700">Full Name</label>
            <input type="text" id="name" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-2 focus:ring-purple-500 focus:border-purple-500">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700">Username</label>
            <input type="text" id="username" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-2 focus:ring-purple-500 focus:border-purple-500">
          </div>
        </div>

        <div>
          <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
          <input type="email" id="email" required class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-2 focus:ring-purple-500 focus:border-purple-500">
        </div>

        <div>
          <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
          <input type="password" id="password" required class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-2 focus:ring-purple-500 focus:border-purple-500">
        </div>

        <div id="confirmPasswordField" class="hidden">
          <label for="confirmPassword" class="block text-sm font-medium text-gray-700">Confirm Password</label>
          <input type="password" id="confirmPassword" class="mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-2 focus:ring-purple-500 focus:border-purple-500">
        </div>

        <p id="errorMsg" class="text-red-500 text-sm hidden"></p>

        <button type="submit" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold py-2 rounded-lg">
          <span id="submitText">Sign In</span>
        </button>
      </form>
    </div>
  </div>

  <!-- ---------- SCRIPT TO TOGGLE SIGN IN / SIGN UP ---------- -->
  <script>
    const signInTab = document.getElementById('signInTab');
    const signUpTab = document.getElementById('signUpTab');
    const signupFields = document.getElementById('signupFields');
    const confirmPasswordField = document.getElementById('confirmPasswordField');
    const formTitle = document.getElementById('formTitle');
    const submitText = document.getElementById('submitText');
    const loginForm = document.getElementById('loginForm');
    const errorMsg = document.getElementById('errorMsg');

    signInTab.addEventListener('click', () => {
      signupFields.classList.add('hidden');
      confirmPasswordField.classList.add('hidden');
      submitText.textContent = 'Sign In';
      formTitle.textContent = 'Welcome Back';
      signInTab.classList.add('bg-gradient-to-r','from-purple-500','to-pink-500','text-white');
      signUpTab.classList.remove('bg-gradient-to-r','from-purple-500','to-pink-500','text-white');
    });

    signUpTab.addEventListener('click', () => {
      signupFields.classList.remove('hidden');
      confirmPasswordField.classList.remove('hidden');
      submitText.textContent = 'Sign Up';
      formTitle.textContent = 'Create Account';
      signUpTab.classList.add('bg-gradient-to-r','from-purple-500','to-pink-500','text-white');
      signInTab.classList.remove('bg-gradient-to-r','from-purple-500','to-pink-500','text-white');
    });

    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      errorMsg.classList.add('hidden');

      const isSignUp = submitText.textContent === 'Sign Up';
      const data = {
        name: document.getElementById('name').value,
        username: document.getElementById('username').value,
        email: document.getElementById('email').value,
        password: document.getElementById('password').value,
        confirmPassword: document.getElementById('confirmPassword').value
      };

      if (isSignUp && data.password !== data.confirmPassword) {
        errorMsg.textContent = 'Passwords do not match';
        errorMsg.classList.remove('hidden');
        return;
      }

      const endpoint = isSignUp ? '/signup' : '/login';
      const response = await fetch(endpoint, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(data)
      });

      const result = await response.json();
      if (result.success) {
        window.location.href = '/'; // redirect after login/signup
      } else {
        errorMsg.textContent = result.message;
        errorMsg.classList.remove('hidden');
      }
    });
  </script>
</body>
</html>
